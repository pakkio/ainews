<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Intelligence Platform - Real-time Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 10, 0.8);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #00d4ff, #ff00d4, #00ff88);
            background-size: 200% 200%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00ff88;
            border-radius: 20px;
            padding: 8px 16px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-controls {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .input-group label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .search-input {
            background: #1a1a2e;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-size: 1rem;
        }

        .search-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
        }

        .search-input option {
            background: #1a1a2e;
            color: white;
            padding: 8px;
        }

        .search-btn {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .search-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .nav-tabs {
            display: flex;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 5px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .model-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .model-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .model-alive {
            background: #00ff88;
        }

        .model-offline {
            background: #ff4757;
            animation: none;
        }

        .hourglass {
            display: inline-block;
            width: 20px;
            height: 20px;
            position: relative;
            border: 2px solid #00d4ff;
            border-radius: 4px;
            animation: flip 2s infinite;
        }

        .hourglass::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background: #00d4ff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: sand 2s infinite;
        }

        @keyframes flip {
            0%, 50% { transform: rotate(0deg); }
            100% { transform: rotate(180deg); }
        }

        @keyframes sand {
            0% { transform: translate(-50%, -100%); }
            50% { transform: translate(-50%, 0%); }
            100% { transform: translate(-50%, 100%); }
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .content-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin-bottom: 40px;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 600px;
        }

        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 400px;
            text-align: center;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .loading-detail {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .analysis-section {
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(0, 212, 255, 0.05);
            border-radius: 15px;
            border-left: 4px solid #00d4ff;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s ease forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .analysis-section h2 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-timestamp {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            font-weight: normal;
        }

        .key-insights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .insight-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(255, 0, 212, 0.1));
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s ease forwards;
        }

        .insight-card:nth-child(2) { animation-delay: 0.1s; }
        .insight-card:nth-child(3) { animation-delay: 0.2s; }
        .insight-card:nth-child(4) { animation-delay: 0.3s; }

        .insight-card:hover {
            transform: translateY(-5px);
        }

        .insight-card h4 {
            color: #ffffff;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .confidence-badge {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: normal;
        }

        .insight-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .source-links {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .source-link {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            text-decoration: none;
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 6px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            transition: all 0.2s ease;
        }

        .source-link:hover {
            background: rgba(0, 212, 255, 0.2);
        }

        .synthesis-section {
            background: linear-gradient(135deg, rgba(255, 0, 212, 0.1), rgba(0, 255, 136, 0.1));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .synthesis-section h3 {
            color: #ff00d4;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detailed-analysis h4 {
            color: #00d4ff;
            margin: 25px 0 15px 0;
            font-size: 1.3rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            border-left: 3px solid #00d4ff;
            padding-left: 15px;
            background: rgba(0, 212, 255, 0.05);
            padding: 15px 15px 15px 20px;
            border-radius: 8px;
        }

        .detailed-analysis h5 {
            color: #00ff88;
            margin: 20px 0 12px 0;
            font-size: 1.1rem;
            font-weight: 700;
            border-left: 3px solid #00ff88;
            padding-left: 15px;
            background: rgba(0, 255, 136, 0.05);
            padding: 10px 15px;
            border-radius: 6px;
        }

        .detailed-analysis ul {
            margin: 15px 0 20px 0;
            list-style: none;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            padding: 15px;
        }

        .detailed-analysis ul li {
            margin: 12px 0;
            padding: 8px 0 8px 25px;
            position: relative;
            line-height: 1.7;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .detailed-analysis ul li:last-child {
            border-bottom: none;
        }

        .detailed-analysis ul li:before {
            content: "💎";
            position: absolute;
            left: 0;
            top: 8px;
            font-size: 0.8rem;
        }

        .detailed-analysis p {
            margin: 15px 0;
            line-height: 1.8;
            text-align: justify;
        }

        .detailed-analysis strong {
            color: #ffffff;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.95em;
        }

        .detailed-analysis em {
            color: #00ff88;
            font-style: italic;
            font-weight: 600;
            background: rgba(0, 255, 136, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* Enhanced bullet points for insight cards */
        .insight-card p {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.7;
            margin-bottom: 15px;
            text-align: justify;
        }

        .insight-card strong {
            color: #ffffff;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .insight-card em {
            color: #00d4ff;
            font-style: italic;
            font-weight: 600;
        }

        /* Enhanced list styling for all analysis sections */
        .analysis-section ul {
            margin: 15px 0;
            list-style: none;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            padding: 15px;
        }

        .analysis-section ul li {
            margin: 10px 0;
            padding: 8px 0 8px 25px;
            position: relative;
            line-height: 1.6;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .analysis-section ul li:last-child {
            border-bottom: none;
        }

        .analysis-section ul li:before {
            content: "🔹";
            position: absolute;
            left: 0;
            top: 8px;
            font-size: 0.8rem;
        }

        /* Risk assessment enhanced styling */
        .risk-item {
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.1), rgba(255, 165, 2, 0.1));
            border-left: 4px solid #ff4757;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .risk-item h5 {
            color: #ff4757;
            margin: 0 0 8px 0;
            font-weight: 700;
        }

        .risk-item ul li:before {
            content: "⚠️";
            font-size: 0.7rem;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .logging-window {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
        }

        .logging-window h3 {
            color: #00ff88;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .log-info {
            color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
        }

        .log-success {
            color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .log-warning {
            color: #ffa502;
            background: rgba(255, 165, 2, 0.1);
        }

        .log-error {
            color: #ff4757;
            background: rgba(255, 71, 87, 0.1);
        }

        .log-timestamp {
            opacity: 0.6;
            font-size: 0.7rem;
        }

        .widget {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .widget h3 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .search-progress {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid #00ff88;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
            font-size: 0.9rem;
        }

        .progress-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .progress-complete { background: #00ff88; }
        .progress-active { 
            background: #00d4ff; 
            animation: pulse 1s infinite;
        }
        .progress-pending { background: rgba(255, 255, 255, 0.3); }

        .error-state {
            text-align: center;
            padding: 40px;
            color: #ff4757;
        }

        @media (max-width: 768px) {
            .content-area {
                grid-template-columns: 1fr;
            }
            
            .search-controls {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div>
                    <h1>AI Intelligence Platform</h1>
                    <p style="margin-top: 5px; color: rgba(255, 255, 255, 0.7);">Dynamic Analysis • Real-time Intelligence • Strategic Synthesis</p>
                </div>
                <div class="live-indicator" id="dataStatusIndicator">
                    <div class="live-dot"></div>
                    <span>Live Analysis</span>
                </div>
            </div>
        </header>

        <div class="control-panel">
            <div class="search-controls">
                <div class="input-group">
                    <label>Analysis Topic</label>
                    <input type="text" class="search-input" id="searchQuery" placeholder="e.g., 'generative AI developments last week', 'EU AI regulation updates', 'open source LLM trends'" value="generative AI developments last week">
                </div>
                <div class="input-group">
                    <label>Time Frame</label>
                    <select class="search-input" id="timeFrame">
                        <option value="week">Last Week</option>
                        <option value="month">Last Month</option>
                        <option value="quarter">Last Quarter</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Analysis Depth</label>
                    <select class="search-input" id="analysisDepth">
                        <option value="strategic">Strategic Overview</option>
                        <option value="technical">Technical Deep-Dive</option>
                        <option value="market">Market Intelligence</option>
                        <option value="comprehensive">Comprehensive</option>
                    </select>
                </div>
                <button class="search-btn" id="startAnalysis">Analyze</button>
            </div>
        </div>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('analysis-results')">
                <span>Analysis Results</span>
                <div class="model-status">
                    <div class="model-dot model-alive"></div>
                    <span>GPT-4</span>
                </div>
            </button>
            <button class="nav-tab" onclick="switchTab('geopolitical')">
                <span>Geopolitical</span>
                <div class="model-status">
                    <div class="model-dot model-alive"></div>
                    <span>Claude-3</span>
                </div>
            </button>
            <button class="nav-tab" onclick="switchTab('technological')">
                <span>Technology</span>
                <div class="model-status">
                    <div class="model-dot model-offline"></div>
                    <span>Gemini</span>
                </div>
            </button>
            <button class="nav-tab" onclick="switchTab('market-intel')">
                <span>Market</span>
                <div class="model-status">
                    <div class="model-dot model-alive"></div>
                    <span>GPT-4o</span>
                </div>
            </button>
            <button class="nav-tab" onclick="switchTab('regulatory')">
                <span>Regulatory</span>
                <div class="model-status">
                    <div class="model-dot model-alive"></div>
                    <span>Claude-3.5</span>
                </div>
            </button>
        </nav>

        <div class="content-area">
            <main class="main-content">
                <div id="analysis-results" class="tab-content active">
                    <div class="loading-state" id="initialMessage">
                        <div style="font-size: 3rem; margin-bottom: 20px;">🧠</div>
                        <div class="loading-text">Ready for Dynamic Analysis</div>
                        <div class="loading-detail">Enter a topic above and click "Analyze" to start real-time AI intelligence gathering</div>
                    </div>
                </div>

                <div id="geopolitical" class="tab-content" style="display: none;">
                    <div class="loading-state">
                        <div style="font-size: 3rem; margin-bottom: 20px;">🌍</div>
                        <div class="loading-text">Geopolitical Analysis Ready</div>
                        <div class="loading-detail">Run an analysis to see regional AI power dynamics</div>
                    </div>
                </div>

                <div id="technological" class="tab-content" style="display: none;">
                    <div class="loading-state">
                        <div style="font-size: 3rem; margin-bottom: 20px;">⚡</div>
                        <div class="loading-text">Technology Trends Ready</div>
                        <div class="loading-detail">Run an analysis to see technical innovation vectors</div>
                    </div>
                </div>

                <div id="market-intel" class="tab-content" style="display: none;">
                    <div class="loading-state">
                        <div style="font-size: 3rem; margin-bottom: 20px;">💰</div>
                        <div class="loading-text">Market Intelligence Ready</div>
                        <div class="loading-detail">Run an analysis to see investment flows and market dynamics</div>
                    </div>
                </div>

                <div id="regulatory" class="tab-content" style="display: none;">
                    <div class="loading-state">
                        <div style="font-size: 3rem; margin-bottom: 20px;">⚖️</div>
                        <div class="loading-text">Regulatory Analysis Ready</div>
                        <div class="loading-detail">Run an analysis to see compliance landscape evolution</div>
                    </div>
                </div>
            </main>

            <aside class="sidebar">
                <div class="widget">
                    <h3>🔄 Analysis Status</h3>
                    <div id="analysisStatus">
                        <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">No active analysis</p>
                    </div>
                </div>

                <div class="logging-window">
                    <h3>📋 Activity Log</h3>
                    <div id="activityLog">
                        <div class="log-entry log-info">
                            <span class="log-timestamp">[00:00:00]</span> System initialized - AI Intelligence Platform ready
                        </div>
                    </div>
                </div>

                <div class="widget">
                    <h3>📊 Analysis History</h3>
                    <div id="analysisHistory">
                        <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">No previous analyses</p>
                    </div>
                </div>

                <div class="widget">
                    <h3>⚡ Quick Actions</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="search-btn" style="padding: 8px 12px; font-size: 0.9rem;" onclick="runQuickAnalysis('AI regulation updates')">EU AI Act Updates</button>
                        <button class="search-btn" style="padding: 8px 12px; font-size: 0.9rem;" onclick="runQuickAnalysis('open source AI models')">Open Source Models</button>
                        <button class="search-btn" style="padding: 8px 12px; font-size: 0.9rem;" onclick="runQuickAnalysis('AI funding rounds')">Funding & Investments</button>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <script>
        class AIIntelligencePlatform {
            constructor() {
                this.analysisInProgress = false;
                this.currentAnalysisId = null;
                this.analysisHistory = [];
                this.initializeEventListeners();
                this.apiBaseUrl = 'http://localhost:3001/api';
                this.logger = new ActivityLogger();
                this.logger.log('System initialized - AI Intelligence Platform ready', 'info');
                
                // Configure marked for better markdown rendering
                if (typeof marked !== 'undefined') {
                    marked.setOptions({
                        breaks: true,
                        gfm: true
                    });
                }
            }

            parseMarkdown(text) {
                if (typeof marked !== 'undefined' && text) {
                    return marked.parse(text);
                }
                return text || '';
            }

            initializeEventListeners() {
                document.getElementById('startAnalysis').addEventListener('click', () => this.startAnalysis());
                document.getElementById('searchQuery').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.startAnalysis();
                });
            }

            async startAnalysis() {
                if (this.analysisInProgress) return;

                const query = document.getElementById('searchQuery').value.trim();
                if (!query) {
                    alert('Please enter an analysis topic');
                    return;
                }

                const timeFrame = document.getElementById('timeFrame').value;
                const depth = document.getElementById('analysisDepth').value;

                this.analysisInProgress = true;
                this.currentAnalysisId = Date.now();
                
                this.updateUI('loading');
                await this.performAnalysis(query, timeFrame, depth);
            }

            async performAnalysis(query, timeFrame, depth) {
                try {
                    this.showLoadingState(query);
                    this.updateProgress('Initializing AI intelligence pipeline...', 'active');
                    this.logger.log('Initializing AI intelligence pipeline', 'info');
                    
                    // Call backend API
                    this.logger.log('Connecting to backend API', 'info');
                    const response = await fetch(`${this.apiBaseUrl}/analyze`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            query,
                            timeFrame,
                            analysisDepth: depth,
                            region: 'global'
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`Analysis failed: ${response.status}`);
                    }

                    this.updateProgress('Gathering intelligence from multiple sources...', 'active');
                    this.logger.log('Gathering data from multiple sources', 'info');
                    const data = await response.json();
                    
                    this.updateProgress('Processing results with AI synthesis...', 'active');
                    this.logger.log(`Processing ${data.searchResults.totalFound} sources`, 'info');
                    
                    // Log data source status
                    if (data.searchResults.dataSource) {
                        const statusType = data.searchResults.dataSource.isLive ? 'success' : 'warning';
                        const statusMessage = data.searchResults.dataSource.isLive ? 
                            `Live data: ${data.searchResults.dataSource.sources.news} news + ${data.searchResults.dataSource.sources.academic} academic sources` :
                            `Demo mode: Using mock data (set NEWS_API_KEY for live data)`;
                        this.logger.log(statusMessage, statusType);
                    }
                    
                    await this.delay(1500);
                    
                    this.updateProgress('Generating strategic insights...', 'active');
                    this.logger.log('Generating AI insights and synthesis', 'info');
                    await this.delay(1000);
                    
                    this.displayResults(data, query);
                    this.updateDataStatusIndicator(data.searchResults.dataSource);
                    this.updateProgress('Analysis complete', 'complete');
                    this.logger.log('Analysis completed successfully', 'success');
                    
                    this.addToHistory(query, timeFrame, depth);
                    
                } catch (error) {
                    console.error('Analysis error:', error);
                    this.logger.log(`Analysis failed: ${error.message}`, 'error');
                    this.showError('Analysis failed. Please ensure the backend server is running.');
                } finally {
                    this.analysisInProgress = false;
                    this.updateUI('ready');
                }
            }

            showLoadingState(query) {
                const content = document.getElementById('analysis-results');
                content.innerHTML = `
                    <div class="loading-state">
                        <div class="hourglass"></div>
                        <div class="loading-text">Analyzing: "${query}"</div>
                        <div class="loading-detail">Connecting to AI intelligence services...</div>
                        <div class="search-progress" id="searchProgress">
                            <div class="progress-item">
                                <div class="progress-icon progress-active"></div>
                                <span>Starting analysis pipeline...</span>
                            </div>
                        </div>
                    </div>
                `;
                this.logger.log(`Starting analysis for query: "${query}"`, 'info');
            }

            updateProgress(text, status) {
                const progress = document.getElementById('searchProgress');
                if (progress) {
                    const item = document.createElement('div');
                    item.className = 'progress-item';
                    item.innerHTML = `
                        <div class="progress-icon progress-${status}"></div>
                        <span>${text}</span>
                    `;
                    progress.appendChild(item);
                }
            }

            displayResults(data, originalQuery) {
                const content = document.getElementById('analysis-results');
                const timestamp = new Date().toLocaleString();
                
                content.innerHTML = `
                    ${data.searchResults.dataSource ? `
                    <div style="background: ${data.searchResults.dataSource.isLive ? 'rgba(0, 255, 136, 0.1)' : 'rgba(255, 165, 2, 0.1)'}; border: 1px solid ${data.searchResults.dataSource.isLive ? '#00ff88' : '#ffa502'}; border-radius: 12px; padding: 15px; margin-bottom: 20px; text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 8px;">
                            <div style="width: 8px; height: 8px; background: ${data.searchResults.dataSource.isLive ? '#00ff88' : '#ffa502'}; border-radius: 50%; ${data.searchResults.dataSource.isLive ? 'animation: pulse 2s infinite;' : ''}"></div>
                            <strong style="color: ${data.searchResults.dataSource.isLive ? '#00ff88' : '#ffa502'};">
                                ${data.searchResults.dataSource.isLive ? '🔴 LIVE DATA' : '⚠️ DEMO MODE - MOCK DATA'}
                            </strong>
                        </div>
                        <div style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.8);">
                            ${data.searchResults.dataSource.isLive ? 
                                `Real-time data from NewsAPI and arXiv • ${data.searchResults.dataSource.sources.news} news articles • ${data.searchResults.dataSource.sources.academic} academic papers` : 
                                `Demo using simulated data • Set NEWS_API_KEY environment variable for live data • Academic sources (arXiv) are live`
                            }
                        </div>
                    </div>
                    ` : ''}

                    <div class="synthesis-section">
                        <h3>🎯 Strategic Intelligence Synthesis</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                            <div>
                                <p><strong>Query:</strong> "${originalQuery}"</p>
                                <p><strong>Analysis Depth:</strong> ${data.analysisDepth}</p>
                                <p><strong>Generated:</strong> ${timestamp}</p>
                            </div>
                            <div>
                                <p><strong>Sources Analyzed:</strong> ${data.searchResults.totalFound}</p>
                                <p><strong>Data Status:</strong> <span class="confidence-badge" style="background: ${data.searchResults.dataSource?.isLive ? 'rgba(0, 255, 136, 0.2); color: #00ff88' : 'rgba(255, 165, 2, 0.2); color: #ffa502'}">${data.searchResults.dataSource?.status || 'UNKNOWN'}</span></p>
                                <p><strong>Methodology:</strong> ${data.analysis.methodology || 'Multi-source synthesis'}</p>
                                <p><strong>Confidence:</strong> <span class="confidence-badge">${(data.analysis.confidence * 100).toFixed(0)}%</span></p>
                            </div>
                        </div>
                        <div style="margin-top: 15px; line-height: 1.6;">${this.parseMarkdown(data.analysis.summary)}</div>
                    </div>

                    ${data.analysis.detailedInsight ? `
                    <div class="analysis-section">
                        <h2>📊 Detailed Strategic Analysis <span class="section-timestamp">${timestamp}</span></h2>
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 25px; line-height: 1.7; color: rgba(255, 255, 255, 0.9);">
                            ${this.parseMarkdown(data.analysis.detailedInsight)}
                        </div>
                    </div>
                    ` : ''}

                    <div class="analysis-section">
                        <h2>🔍 Key Intelligence Points <span class="section-timestamp">${timestamp}</span></h2>
                        <div class="key-insights">
                            ${data.analysis.insights.map((insight, index) => `
                                <div class="insight-card" style="animation-delay: ${index * 0.1}s">
                                    <h4>Strategic Insight ${index + 1}</h4>
                                    <div style="line-height: 1.5;">${this.parseMarkdown(insight)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="analysis-section">
                        <h2>📈 Trend Analysis</h2>
                        <div class="key-insights">
                            ${data.analysis.trends.map((trend, index) => `
                                <div class="insight-card" style="animation-delay: ${index * 0.1}s">
                                    <h4>Trend ${index + 1}</h4>
                                    <div style="line-height: 1.5;">${this.parseMarkdown(trend)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="analysis-section">
                        <h2>🎯 Strategic Implications</h2>
                        <div class="key-insights">
                            ${data.analysis.implications.map((implication, index) => `
                                <div class="insight-card" style="animation-delay: ${index * 0.1}s">
                                    <h4>Implication ${index + 1}</h4>
                                    <div style="line-height: 1.5;">${this.parseMarkdown(implication)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    ${data.analysis.technicalDetails ? `
                    <div class="analysis-section">
                        <h2>⚙️ Technical Architecture</h2>
                        <div class="key-insights">
                            ${data.analysis.technicalDetails.map((detail, index) => `
                                <div class="insight-card" style="animation-delay: ${index * 0.1}s">
                                    <h4>Technical Detail ${index + 1}</h4>
                                    <div style="line-height: 1.5;">${this.parseMarkdown(detail)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}

                    ${data.analysis.marketAnalysis ? `
                    <div class="analysis-section">
                        <h2>💼 Market Intelligence</h2>
                        <div class="insight-card">
                            <h4>Market Overview</h4>
                            <p><strong>Market Size:</strong> ${data.analysis.marketAnalysis.size}</p>
                            <p><strong>Market Leaders:</strong> ${data.analysis.marketAnalysis.leaders}</p>
                            <p><strong>Growth Drivers:</strong> ${data.analysis.marketAnalysis.growth_drivers}</p>
                            ${data.analysis.marketAnalysis.strategic_considerations ? `<p><strong>Strategic Considerations:</strong> ${data.analysis.marketAnalysis.strategic_considerations}</p>` : ''}
                        </div>
                    </div>
                    ` : ''}

                    ${data.analysis.riskAssessment ? `
                    <div class="analysis-section">
                        <h2>⚠️ Risk Assessment</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                            <div class="risk-item">
                                <h5>🔧 Technical Risk</h5>
                                <div style="font-size: 0.9rem; margin-bottom: 8px; opacity: 0.9;">
                                    ${Array.isArray(data.analysis.riskAssessment.technical) ? 
                                        `<ul>${data.analysis.riskAssessment.technical.map(risk => `<li>${this.parseMarkdown(risk)}</li>`).join('')}</ul>` :
                                        `<div>${this.parseMarkdown(data.analysis.riskAssessment.technical)}</div>`
                                    }
                                </div>
                            </div>
                            <div class="risk-item" style="border-left-color: #ffa502;">
                                <h5 style="color: #ffa502;">📋 Regulatory Risk</h5>
                                <div style="font-size: 0.9rem; margin-bottom: 8px; opacity: 0.9;">
                                    ${Array.isArray(data.analysis.riskAssessment.regulatory) ? 
                                        `<ul>${data.analysis.riskAssessment.regulatory.map(risk => `<li>${this.parseMarkdown(risk)}</li>`).join('')}</ul>` :
                                        `<div>${this.parseMarkdown(data.analysis.riskAssessment.regulatory)}</div>`
                                    }
                                </div>
                            </div>
                            <div class="risk-item" style="border-left-color: #ff6b6b;">
                                <h5 style="color: #ff6b6b;">⚔️ Competitive Risk</h5>
                                <div style="font-size: 0.9rem; margin-bottom: 8px; opacity: 0.9;">
                                    ${Array.isArray(data.analysis.riskAssessment.competitive) ? 
                                        `<ul>${data.analysis.riskAssessment.competitive.map(risk => `<li>${this.parseMarkdown(risk)}</li>`).join('')}</ul>` :
                                        `<div>${this.parseMarkdown(data.analysis.riskAssessment.competitive)}</div>`
                                    }
                                </div>
                            </div>
                            <div class="risk-item" style="border-left-color: #a55eea;">
                                <h5 style="color: #a55eea;">⚙️ Operational Risk</h5>
                                <div style="font-size: 0.9rem; margin-bottom: 8px; opacity: 0.9;">
                                    ${Array.isArray(data.analysis.riskAssessment.operational) ? 
                                        `<ul>${data.analysis.riskAssessment.operational.map(risk => `<li>${this.parseMarkdown(risk)}</li>`).join('')}</ul>` :
                                        `<div>${this.parseMarkdown(data.analysis.riskAssessment.operational)}</div>`
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    ` : ''}

                    ${data.analysis.recommendations ? `
                    <div class="analysis-section">
                        <h2>💡 Strategic Recommendations</h2>
                        <div class="key-insights">
                            ${data.analysis.recommendations.map((rec, index) => `
                                <div class="insight-card" style="animation-delay: ${index * 0.1}s">
                                    <h4>Recommendation ${index + 1}</h4>
                                    <div style="line-height: 1.5;">${this.parseMarkdown(rec)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}

                    ${data.analysis.technicalSpecifications ? `
                    <div class="analysis-section">
                        <h2>🔧 Technical Specifications</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                            <div class="insight-card">
                                <h4>Model Architecture</h4>
                                <p><strong>Type:</strong> ${data.analysis.technicalSpecifications.modelArchitecture}</p>
                                <p><strong>Parameters:</strong> ${data.analysis.technicalSpecifications.parameters}</p>
                                <p><strong>Framework:</strong> ${data.analysis.technicalSpecifications.trainingFramework}</p>
                            </div>
                            <div class="insight-card">
                                <h4>Performance Metrics</h4>
                                <p><strong>Inference Latency:</strong> ${data.analysis.technicalSpecifications.inferenceLatency}</p>
                                <p><strong>Throughput:</strong> ${data.analysis.technicalSpecifications.throughput}</p>
                                <p><strong>Accuracy:</strong> ${data.analysis.technicalSpecifications.accuracy}</p>
                            </div>
                            <div class="insight-card">
                                <h4>Infrastructure Requirements</h4>
                                <p><strong>GPU Requirements:</strong> ${data.analysis.technicalSpecifications.gpuRequirements}</p>
                                <p><strong>Power Consumption:</strong> ${data.analysis.technicalSpecifications.powerConsumption}</p>
                            </div>
                        </div>
                    </div>
                    ` : ''}

                    <div class="analysis-section">
                        <h2>📰 Source Materials ${data.searchResults.dataSource ? `<span class="confidence-badge" style="background: ${data.searchResults.dataSource.isLive ? 'rgba(0, 255, 136, 0.2); color: #00ff88' : 'rgba(255, 165, 2, 0.2); color: #ffa502'}">${data.searchResults.dataSource.status}</span>` : ''}</h2>
                        <div class="key-insights">
                            ${data.searchResults.results.slice(0, 8).map(source => {
                                const isLiveSource = source.type === 'academic' || (source.type === 'news' && !source.url.includes('example.com'));
                                return `
                                <div class="insight-card">
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                        <h4 style="margin: 0;">${source.source}</h4>
                                        <span class="confidence-badge" style="background: ${isLiveSource ? 'rgba(0, 255, 136, 0.2); color: #00ff88' : 'rgba(255, 165, 2, 0.2); color: #ffa502'}; font-size: 0.7rem;">
                                            ${isLiveSource ? 'LIVE' : 'DEMO'}
                                        </span>
                                    </div>
                                    <p><strong>${source.title}</strong></p>
                                    <p style="font-size: 0.9rem; opacity: 0.8;">${source.description}</p>
                                    <div class="source-links">
                                        <a href="${source.url}" target="_blank" class="source-link">${isLiveSource ? 'Read Full Article' : 'Demo Link'}</a>
                                        <span class="confidence-badge">${(source.relevanceScore * 100).toFixed(0)}% relevance</span>
                                        <span class="confidence-badge" style="background: ${source.type === 'technical' ? 'rgba(0, 255, 136, 0.2); color: #00ff88' : source.type === 'academic' ? 'rgba(138, 43, 226, 0.2); color: #8a2be2' : 'rgba(255, 136, 0, 0.2); color: #ff8800'}">${source.type}</span>
                                    </div>
                                </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;

                this.updateOtherTabs(data, originalQuery);
            }

            updateOtherTabs(data, query) {
                // Generate different analysis perspectives based on actual data
                const baseAnalysis = data.analysis;
                const timestamp = new Date().toLocaleString();
                
                // Geopolitical tab - Focus on strategic implications and regional perspectives
                document.getElementById('geopolitical').innerHTML = `
                    <div class="analysis-section">
                        <h2>🌍 Geopolitical Analysis - ${query} <span class="section-timestamp">${timestamp}</span></h2>
                        ${baseAnalysis.detailedInsight ? `
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                            <div>${baseAnalysis.summary}</div>
                        </div>
                        ` : ''}
                        <div class="key-insights">
                            ${baseAnalysis.implications ? baseAnalysis.implications.slice(0, 3).map((implication, index) => `
                                <div class="insight-card">
                                    <h4>Geopolitical Impact ${index + 1}</h4>
                                    <p>${implication}</p>
                                </div>
                            `).join('') : `
                                <div class="insight-card">
                                    <h4>Regional Analysis</h4>
                                    <p>Based on current ${query} developments, regional dynamics show varied approaches to implementation and regulation across major markets.</p>
                                </div>
                            `}
                        </div>
                    </div>
                `;

                // Technological tab - Focus on technical details and innovations
                document.getElementById('technological').innerHTML = `
                    <div class="analysis-section">
                        <h2>⚡ Technology Analysis - ${query} <span class="section-timestamp">${timestamp}</span></h2>
                        ${baseAnalysis.detailedInsight && data.analysisDepth === 'technical' ? `
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                            <div>${baseAnalysis.detailedInsight}</div>
                        </div>
                        ` : ''}
                        <div class="key-insights">
                            ${baseAnalysis.technicalDetails ? baseAnalysis.technicalDetails.slice(0, 4).map((detail, index) => `
                                <div class="insight-card">
                                    <h4>Technical Innovation ${index + 1}</h4>
                                    <p>${detail}</p>
                                </div>
                            `).join('') : ''}
                            ${baseAnalysis.trends ? baseAnalysis.trends.slice(0, 2).map((trend, index) => `
                                <div class="insight-card">
                                    <h4>Technology Trend ${index + 1}</h4>
                                    <p>${trend}</p>
                                </div>
                            `).join('') : ''}
                        </div>
                        ${baseAnalysis.technicalSpecifications ? `
                        <div class="analysis-section">
                            <h3>🔧 Technical Specifications</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                                <div class="insight-card">
                                    <h4>Model Details</h4>
                                    <p><strong>Model:</strong> ${baseAnalysis.technicalSpecifications.modelName}</p>
                                    <p><strong>Company:</strong> ${baseAnalysis.technicalSpecifications.company}</p>
                                    <p><strong>Parameters:</strong> ${baseAnalysis.technicalSpecifications.parameters}</p>
                                    <p><strong>Context:</strong> ${baseAnalysis.technicalSpecifications.contextLength}</p>
                                </div>
                                <div class="insight-card">
                                    <h4>Performance Metrics</h4>
                                    <p><strong>Latency:</strong> ${baseAnalysis.technicalSpecifications.inferenceLatency}</p>
                                    <p><strong>Throughput:</strong> ${baseAnalysis.technicalSpecifications.throughput}</p>
                                    <p><strong>GPU Requirements:</strong> ${baseAnalysis.technicalSpecifications.gpuRequirements}</p>
                                </div>
                                <div class="insight-card">
                                    <h4>Architecture Features</h4>
                                    <p><strong>Type:</strong> ${baseAnalysis.technicalSpecifications.modelArchitecture}</p>
                                    <p><strong>Framework:</strong> ${baseAnalysis.technicalSpecifications.trainingFramework}</p>
                                    <p><strong>Embedding:</strong> ${baseAnalysis.technicalSpecifications.embeddingModel}</p>
                                    ${baseAnalysis.technicalSpecifications.features ? `<p><strong>Features:</strong> ${baseAnalysis.technicalSpecifications.features.join(', ')}</p>` : ''}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                `;

                // Market tab - Focus on market analysis and investment trends
                document.getElementById('market-intel').innerHTML = `
                    <div class="analysis-section">
                        <h2>💰 Market Intelligence - ${query} <span class="section-timestamp">${timestamp}</span></h2>
                        ${baseAnalysis.detailedInsight && data.analysisDepth === 'market' ? `
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                            <div>${baseAnalysis.detailedInsight}</div>
                        </div>
                        ` : ''}
                        ${baseAnalysis.marketAnalysis ? `
                        <div class="insight-card" style="margin-bottom: 20px;">
                            <h4>Market Overview</h4>
                            <p><strong>Market Size:</strong> ${baseAnalysis.marketAnalysis.size}</p>
                            <p><strong>Market Leaders:</strong> ${baseAnalysis.marketAnalysis.leaders}</p>
                            <p><strong>Growth Drivers:</strong> ${baseAnalysis.marketAnalysis.growth_drivers}</p>
                        </div>
                        ` : ''}
                        <div class="key-insights">
                            ${baseAnalysis.insights ? baseAnalysis.insights.slice(0, 3).map((insight, index) => `
                                <div class="insight-card">
                                    <h4>Market Insight ${index + 1}</h4>
                                    <p>${insight}</p>
                                </div>
                            `).join('') : ''}
                        </div>
                    </div>
                `;

                // Regulatory tab - Focus on risk assessment and compliance
                document.getElementById('regulatory').innerHTML = `
                    <div class="analysis-section">
                        <h2>⚖️ Regulatory Analysis - ${query} <span class="section-timestamp">${timestamp}</span></h2>
                        ${baseAnalysis.riskAssessment ? `
                        <div class="analysis-section">
                            <h3>⚠️ Risk Assessment</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                <div class="insight-card">
                                    <h4>Regulatory Risk</h4>
                                    <p><span class="confidence-badge" style="background: rgba(255, 71, 87, 0.2); color: #ff4757">${baseAnalysis.riskAssessment.regulatory}</span></p>
                                </div>
                                <div class="insight-card">
                                    <h4>Compliance Risk</h4>
                                    <p><span class="confidence-badge" style="background: rgba(255, 165, 2, 0.2); color: #ffa502">${baseAnalysis.riskAssessment.operational}</span></p>
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        <div class="key-insights">
                            ${baseAnalysis.implications ? baseAnalysis.implications.slice(0, 3).map((implication, index) => `
                                <div class="insight-card">
                                    <h4>Regulatory Implication ${index + 1}</h4>
                                    <p>${implication}</p>
                                </div>
                            `).join('') : ''}
                            ${baseAnalysis.recommendations ? baseAnalysis.recommendations.slice(0, 2).map((rec, index) => `
                                <div class="insight-card">
                                    <h4>Compliance Recommendation ${index + 1}</h4>
                                    <p>${rec}</p>
                                </div>
                            `).join('') : ''}
                        </div>
                    </div>
                `;
            }

            showError(message) {
                const content = document.getElementById('analysis-results');
                content.innerHTML = `
                    <div class="error-state">
                        <div style="font-size: 3rem; margin-bottom: 20px;">⚠️</div>
                        <div class="loading-text">Analysis Error</div>
                        <div class="loading-detail">${message}</div>
                        <button class="search-btn" onclick="location.reload()" style="margin-top: 20px;">Retry</button>
                    </div>
                `;
            }

            addToHistory(query, timeFrame, depth) {
                this.analysisHistory.unshift({
                    query,
                    timeFrame,
                    depth,
                    timestamp: new Date().toLocaleString()
                });

                const historyElement = document.getElementById('analysisHistory');
                historyElement.innerHTML = this.analysisHistory.slice(0, 5).map(item => `
                    <div style="margin-bottom: 10px; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 6px; cursor: pointer;" onclick="document.getElementById('searchQuery').value='${item.query}'; document.getElementById('timeFrame').value='${item.timeFrame}'; document.getElementById('analysisDepth').value='${item.depth}';">
                        <div style="font-size: 0.8rem; color: #00d4ff;">${item.query}</div>
                        <div style="font-size: 0.7rem; color: rgba(255,255,255,0.5);">${item.timestamp}</div>
                    </div>
                `).join('');
            }

            updateUI(state) {
                const button = document.getElementById('startAnalysis');
                if (state === 'loading') {
                    button.disabled = true;
                    button.textContent = 'Analyzing...';
                } else {
                    button.disabled = false;
                    button.textContent = 'Analyze';
                }
            }

            updateDataStatusIndicator(dataSource) {
                const indicator = document.getElementById('dataStatusIndicator');
                if (indicator && dataSource) {
                    const dot = indicator.querySelector('.live-dot');
                    const span = indicator.querySelector('span');
                    
                    if (dataSource.isLive) {
                        indicator.style.background = 'rgba(0, 255, 136, 0.1)';
                        indicator.style.borderColor = '#00ff88';
                        dot.style.background = '#00ff88';
                        span.textContent = 'Live Data';
                        dot.style.animation = 'pulse 2s infinite';
                    } else {
                        indicator.style.background = 'rgba(255, 165, 2, 0.1)';
                        indicator.style.borderColor = '#ffa502';
                        dot.style.background = '#ffa502';
                        span.textContent = 'Demo Mode';
                        dot.style.animation = 'none';
                    }
                }
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabId).style.display = 'block';
            
            // Add active class to clicked nav tab
            const clickedTab = event.target.closest('.nav-tab');
            clickedTab.classList.add('active');
            
            // Log tab switch
            const tabName = clickedTab.querySelector('span').textContent;
            platform.logger.log(`Switched to ${tabName} tab`, 'info');
        }

        function runQuickAnalysis(query) {
            document.getElementById('searchQuery').value = query;
            platform.startAnalysis();
        }

        // Activity Logger Class
        class ActivityLogger {
            constructor() {
                this.logContainer = document.getElementById('activityLog');
                this.maxLogs = 50;
            }

            log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry log-${type}`;
                logEntry.innerHTML = `
                    <span class="log-timestamp">[${timestamp}]</span> ${message}
                `;

                this.logContainer.appendChild(logEntry);
                
                // Keep only the latest logs
                const entries = this.logContainer.children;
                if (entries.length > this.maxLogs) {
                    this.logContainer.removeChild(entries[0]);
                }

                // Auto-scroll to bottom
                this.logContainer.scrollTop = this.logContainer.scrollHeight;
            }

            clear() {
                this.logContainer.innerHTML = '';
                this.log('Activity log cleared', 'info');
            }
        }

        // Initialize the platform
        const platform = new AIIntelligencePlatform();
    </script>
</body>
</html>